(function(o,e){"use strict";var t=o(".ve-menu-pc"),s=t.children("li").children("a"),i=t.find("ul").find("a"),n=t.find("ul").length,r=function(e){this.themeColor={blue:{fontColor:"#fff",bgColor:"#0E90D2",hoverFontColor:"#fff",hoverBgColor:"#0C79B1"},dark:{fontColor:"#9D9D9D",bgColor:"#1F1F1F",hoverFontColor:"#fff",hoverBgColor:"#000"}},this.defaults={fontSize:"16px",fontColor:this.themeColor.blue.fontColor,bgColor:this.themeColor.blue.bgColor,hoverFontColor:this.themeColor.blue.hoverFontColor,hoverBgColor:this.themeColor.blue.hoverBgColor,subFontSize:"16px",subFontColor:this.themeColor.blue.fontColor,subBgColor:this.themeColor.blue.bgColor,subHoverFontColor:this.themeColor.blue.hoverFontColor,subHoverBgColor:this.themeColor.blue.hoverBgColor,height:40,itemWidth:20,itemSpace:1,theme:"blue",mMenuBtnColor:"#000",mMaskColor:"#000",mBgColor:"#000",mFontColor:"#fff",mSubBgColor:"#222",mSubFontColor:"#fff",mCloseBtnColor:"#fff",animate:!1,speed:200},this.settings=o.extend({},this.defaults,e),this.settings.itemWidth=this.settings.itemWidth-0,this.isMobile=!!navigator.userAgent.match(/AppleWebKit.*Mobile.*/)};r.prototype={init:function(){this.setDefaultTheme().setDefinedTheme().setFirstMenu().setSecondMenu().responsiveLayout().supportFastClick()},setDefaultTheme:function(){function e(o,e){s.css({color:o,backgroundColor:e}),i.css({color:o,backgroundColor:e})}function n(e,s){var i,n;t.find("a").hover(function(){var t=o(this);t.css("color");n=t.css("backgroundColor"),t.css({color:e,backgroundColor:s})},function(){o(this).css({color:i,backgroundColor:n})})}var r=this;switch(r.settings.theme){case"blue":e(r.themeColor.blue.fontColor,r.themeColor.blue.bgColor),!r.isMobile&&n(r.themeColor.blue.hoverFontColor,r.themeColor.blue.hoverBgColor);break;case"dark":e(r.themeColor.dark.fontColor,r.themeColor.dark.bgColor),!r.isMobile&&n(r.themeColor.dark.hoverFontColor,r.themeColor.dark.hoverBgColor)}return r},setDefinedTheme:function(){var o=this.settings.theme;return o&&"string"==typeof o&&"blue"!=o&&(this.settings.fontColor=this.themeColor[o].fontColor,this.settings.bgColor=this.themeColor[o].bgColor,this.settings.hoverFontColor=this.themeColor[o].hoverFontColor,this.settings.hoverBgColor=this.themeColor[o].hoverBgColor,this.settings.subFontColor=this.themeColor[o].fontColor,this.settings.subBgColor=this.themeColor[o].bgColor,this.settings.subHoverFontColor=this.themeColor[o].hoverFontColor,this.settings.subHoverBgColor=this.themeColor[o].hoverBgColor),this},setFirstMenu:function(){var e=this;return s.css({height:e.settings.height,lineHeight:e.settings.height+"px",fontSize:e.settings.fontSize,color:e.settings.fontColor,backgroundColor:e.settings.bgColor}).parent("li").each(function(t,s){var i=o(this);i.width(i.width()+e.settings.itemWidth)}).not(t.children("li").first()).css({marginLeft:this.settings.itemSpace+"px"}),e},setSecondMenu:function(){var e=this;return n&&(i.css({height:e.settings.height,lineHeight:e.settings.height+"px",fontSize:e.settings.subFontSize,color:e.settings.subFontColor,backgroundColor:e.settings.subBgColor}).parent("li").css({height:e.settings.height,lineHeight:e.settings.height+"px"}),o.each(s,function(t,i){var n=o(this).next("ul");n.css("top",e.settings.height),n.width()+e.settings.itemWidth<s.width()?n.width(s.width()):n.width(n.width()+e.settings.itemWidth)})),e},setHoverCss:function(){var e=this;s.hover(function(){o(this).css({color:e.settings.hoverFontColor,backgroundColor:e.settings.hoverBgColor})},function(){o(this).css({color:e.settings.fontColor,backgroundColor:e.settings.bgColor})}),i.hover(function(){var t=o(this);t.css({color:e.settings.subHoverFontColor,backgroundColor:e.settings.subHoverBgColor}),t.parents("ul").first().prev().css({color:e.settings.hoverFontColor,backgroundColor:e.settings.hoverBgColor})},function(){var t=o(this);t.css({color:e.settings.subFontColor,backgroundColor:e.settings.subBgColor}),t.parents("ul").first().prev().css({color:e.settings.fontColor,backgroundColor:e.settings.bgColor})})},responsiveLayout:function(){var s=this,i=o(e).width(),n=o(".ve-menu-icon"),r=s.settings.animate;return i<=768?n.length?(t.hide(),n.show()):(t.hide(),t.after('<div class="ve-menu-icon"><div></div><div></div><div></div></div>'),n=o(".ve-menu-icon"),n.css("marginTop",10).on("click",function(){o(".ve-menu-mask").length||o(".ve-menu-mobile").length||o('<div class="ve-menu-mask"></div>').css("background",s.settings.mMaskColor).appendTo(".ve-menu").after('<ul class="ve-menu-mobile"><li class="ve-menu-close"><div></div></li>'+t.html()+"</ul>").next().find("ul, li, a").removeAttr("style"),r?(s.animate(o(".ve-menu-mask"),r,s.settings.speed,"open"),s.animate(o(".ve-menu-mobile"),r,s.settings.speed,"open")):(o(".ve-menu-mask").show(),o(".ve-menu-mobile").show()),o(".ve-menu-mobile > li").not(".ve-menu-close").find("ul").find("a").css({background:s.settings.mSubBgColor,color:s.settings.mSubFontColor}),o(".ve-menu-mobile > li").not(".ve-menu-close").unbind("click").on("click",function(e){r?o(this).find("ul").toggle(150):o(this).find("ul").toggle()}),o(".ve-menu-close").css("color",s.settings.mCloseBtnColor).children("div").on("click",function(){r?(s.animate(o(".ve-menu-mask"),r,s.settings.speed,"close"),s.animate(o(".ve-menu-mobile"),r,s.settings.speed,"close")):(o(".ve-menu-mask").hide(),o(".ve-menu-mobile").hide())})}).children("div").css("background",s.settings.mMenuBtnColor)):n.length&&(t.show(),n.hide()),s},supportFastClick:function(){if(this.isMobile)try{FastClick&&FastClick.attach(document.body)}catch(o){console.log("fastclick.js is not found.You are still using normal 'click'")}else this.setHoverCss();return this},animate:function(o,e,t,s){var i={},n={};switch(e){case"fade":"open"==s?(o.hide(),o.fadeIn(t)):"close"==s&&o.fadeOut(t);break;case"slide":o.stop(!0,!0),"open"==s?(i.height=0,n.height="100%"):"close"==s&&(i.height="100%",n.height=0),o.css(i).animate(n,t)}}},o.fn.menu=function(e){var t=new r(e);return t.init(),o(window).resize(function(o){t.responsiveLayout()}),this}})(jQuery,window);